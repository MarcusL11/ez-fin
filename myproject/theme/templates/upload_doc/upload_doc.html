{% extends "../dashboard/dashboard_base.html" %}
{% load static %}
{% load widget_tweaks %}
{% block extrahead %}
  <style>
    #overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      display: flex;
      align-items: center;
      justify-content: center;
    }
  </style>
{% endblock extrahead %}
{% block main %}
  <section id="step1-result" class="flex-col items-center min-h-screen">
    <div class="card border-2 border-primary p-10 text-center">
      <header class="text-center">
      <!-- TODO: Add hyperscript to select correct image based on bank selection -->
        <div class="flex justify-center items-center">
          <img src="{% static 'svg/scb_logo.svg' %}" alt="SCB logo" class="h-24 w-auto mx-auto">
        </div>
        <h1>Upload Document</h1>
        <p class="text-xs">(Only PDF, JPEGS, and PNG)</p>
        <a href="" class="link text-xs">Example Documents</a>
      </header>
      <form
        action="{% url 'upload_doc' %}"
        method="post"
        class="flex flex-col items-center justify-center"
        enctype="multipart/form-data"
        _="
           on submit
           add .hidden to #submit-button
           remove .hidden from #loading-button
           remove .invisible from #overlay
           wait 10ms
           remove .opacity-0 from #overlay
           end
          ">
        {% csrf_token %}
        {{ form.non_field_errors }}
        <div class="md:w-1/2 lg:w-1/3 space-y-4 mt-4">
          {% for field in form %}

            <div class="flex flex-col space-y-2">
              {{ field.label_tag }}
              {{ field|add_class:"p-2 border border-primary rounded focus:outline-none focus:ring focus:border-secondary" }}
              {% if field.errors %}
                <div class="text-error text-sm">{{ field.errors }}</div>
              {% endif %}
            </div>
          {% endfor %}
        </div>
        <div class="my-10">
          <button
            class="btn btn-primary"
            type="submit">
            <span id="submit-button">Submit</span>
            <span id="loading-button" class="hidden loading loading-dots loading-sm"></span>
          </button>
        </div>
      </form>
    </div>

  <!-- <div class="my-4" id="step2-result">
  </div> -->
    <div
      id="overlay"
      class="fixed inset-0 bg-black bg-opacity-50 backdrop-blur-sm invisible z-50 flex items-center justify-center transition-opacity duration-300 ease-in-out">
      <div class="bg-base-100 p-6 rounded-lg shadow-xl max-w-sm w-full mx-4">
        <h3 class="text-lg font-bold mb-2">Processing your request</h3>
        <p class="text-sm mb-4">Please do not reload the page or navigate away until the process is complete.</p>
        <div class="flex items-center justify-center">
          <span class="loading loading-spinner loading-lg text-primary"></span>
        </div>
      </div>
    </div>
  </section>
{% endblock main %}

